@import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Barlow+Condensed:wght@400;500;600;700&family=Inter:wght@300;400;500;600&family=Roboto+Mono:wght@400;500&display=swap')
layer(base);

@import url('https://cdn.jsdelivr.net/npm/elice-digital-baeum@1.0.0/dist/elice-digital-baeum.css')
layer(base);

@import 'tailwindcss';

@config '../../tailwind.config.js';

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  :root {
    /* Light mode (default) */
    --void-deep: 255 255 255;
    --void-blue: 241 245 249;
    --void-lighter: 226 232 240;
    --cyber-cyan: 8 145 178;
    --cyber-cyan-dim: 14 116 144;
    --cyber-cyan-glow: 6 182 212;
    --amber-gold: 180 83 9;
    --amber-dark: 146 64 14;
    --amber-bright: 217 119 6;
    --steel-grey: 100 116 139;
    --steel-dark: 148 163 184;
    --steel-light: 30 41 59;
    --tier-1: 69 132 137;
    --tier-2: 121 47 134;
    --tier-3: 188 148 79;
    --tier-4: 146 54 38;

    --body-gradient-inner: rgba(241, 245, 249, 0.8);
    --body-gradient-outer: rgba(255, 255, 255, 1);
    --scrollbar-track: rgba(0, 0, 0, 0.05);
    --scrollbar-thumb: rgba(8, 145, 178, 0.3);
    --scrollbar-thumb-hover: rgba(8, 145, 178, 0.5);
    --shimmer-base: #e2e8f0;
    --shimmer-highlight: #f1f5f9;
    --text-shadow-cyan: rgba(8, 145, 178, 0.3);
    --section-title-shadow: rgba(8, 145, 178, 0.2);
    --neon-shadow:
      0 1px 3px rgba(8, 145, 178, 0.3), 0 1px 6px rgba(8, 145, 178, 0.15);
    --neon-shadow-strong:
      0 1px 4px rgba(8, 145, 178, 0.5), 0 2px 8px rgba(8, 145, 178, 0.3),
      0 4px 12px rgba(8, 145, 178, 0.15);
    --gold-shadow:
      0 1px 3px rgba(180, 83, 9, 0.35), 0 1px 6px rgba(180, 83, 9, 0.2);
    --gold-shadow-strong:
      0 1px 4px rgba(180, 83, 9, 0.5), 0 2px 8px rgba(180, 83, 9, 0.3);
    --glass-shadow: 0 4px 16px 0 rgba(8, 145, 178, 0.08);
    --glass-gold-shadow: 0 4px 16px 0 rgba(180, 83, 9, 0.1);
    --dialog-backdrop: rgba(0, 0, 0, 0.4);
    --modal-glow: 0 0 15px rgba(8, 145, 178, 0.15);
    --game-img-bg: rgb(15 23 42);
    --arche-grid-bg: rgba(148, 163, 184, 0.15);
    --arche-grid-border: rgba(8, 145, 178, 0.2);
    --arche-node-bg-center: rgba(100, 116, 139, 0.04);
    --arche-node-bg-edge: rgba(100, 116, 139, 0.1);
    --arche-node-border: rgba(100, 116, 139, 0.2);
    --arche-node-dim: brightness(0.7);
    --arche-node-img-bg: rgba(71, 85, 105, 0.45);
    --arche-node-hover-bg: rgba(8, 145, 178, 0.15);
    --arche-node-hover-border: rgb(8, 145, 178);
    --arche-tooltip-bg: rgba(241, 245, 249, 0.95);
    --arche-tooltip-border: rgba(8, 145, 178, 0.5);
    --arche-tooltip-shadow:
      0 1px 6px rgba(8, 145, 178, 0.2), 0 2px 12px rgba(8, 145, 178, 0.1);
    color-scheme: light;
  }

  .dark {
    --void-deep: 5 7 10;
    --void-blue: 10 15 30;
    --void-lighter: 20 27 46;
    --cyber-cyan: 0 240 255;
    --cyber-cyan-dim: 0 168 181;
    --cyber-cyan-glow: 77 255 255;
    --amber-gold: 212 163 115;
    --amber-dark: 184 137 90;
    --amber-bright: 232 196 154;
    --steel-grey: 160 160 160;
    --steel-dark: 107 107 107;
    --steel-light: 200 200 200;
    --tier-1: 69 132 137;
    --tier-2: 121 47 134;
    --tier-3: 188 148 79;
    --tier-4: 146 54 38;

    --body-gradient-inner: rgba(10, 15, 30, 0.8);
    --body-gradient-outer: rgba(5, 7, 10, 1);
    --scrollbar-track: rgba(0, 0, 0, 0.2);
    --scrollbar-thumb: rgba(0, 240, 255, 0.3);
    --scrollbar-thumb-hover: rgba(0, 240, 255, 0.5);
    --shimmer-base: #1a1a2e;
    --shimmer-highlight: #2a2a3e;
    --text-shadow-cyan: rgba(0, 240, 255, 0.5);
    --section-title-shadow: rgba(0, 240, 255, 0.6);
    --neon-shadow:
      0 0 10px rgba(0, 240, 255, 0.5), 0 0 20px rgba(0, 240, 255, 0.3);
    --neon-shadow-strong:
      0 0 15px rgba(0, 240, 255, 0.8), 0 0 30px rgba(0, 240, 255, 0.5),
      0 0 45px rgba(0, 240, 255, 0.3);
    --gold-shadow:
      0 0 10px rgba(212, 163, 115, 0.6), 0 0 20px rgba(212, 163, 115, 0.4);
    --gold-shadow-strong:
      0 0 15px rgba(212, 163, 115, 0.8), 0 0 30px rgba(212, 163, 115, 0.5);
    --glass-shadow: 0 8px 32px 0 rgba(0, 240, 255, 0.1);
    --glass-gold-shadow: 0 8px 32px 0 rgba(212, 163, 115, 0.15);
    --dialog-backdrop: rgba(0, 0, 0, 0.8);
    --modal-glow: 0 0 30px rgba(0, 240, 255, 0.3);
    --game-img-bg: transparent;
    --arche-grid-bg: rgba(5, 7, 10, 0.8);
    --arche-grid-border: rgba(0, 240, 255, 0.2);
    --arche-node-bg-center: rgba(10, 15, 30, 0.15);
    --arche-node-bg-edge: rgba(10, 15, 30, 0.4);
    --arche-node-border: rgba(160, 160, 160, 0.4);
    --arche-node-dim: brightness(0.4);
    --arche-node-img-bg: transparent;
    --arche-node-hover-bg: rgba(0, 240, 255, 0.2);
    --arche-node-hover-border: rgb(0, 240, 255);
    --arche-tooltip-bg: rgba(5, 7, 10, 0.98);
    --arche-tooltip-border: rgb(0, 240, 255);
    --arche-tooltip-shadow:
      0 0 10px rgba(0, 240, 255, 0.5), 0 0 20px rgba(0, 240, 255, 0.3);
    color-scheme: dark;
  }

  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }

  /* Native <dialog> reset: remove browser defaults and make it behave like the
     previous overlay-div pattern. showModal() puts the dialog in the top layer
     so z-index and fixed positioning are handled automatically. */
  dialog {
    border: none;
    padding: 0;
    margin: 0;
    max-width: none;
    max-height: none;
    background: transparent;
    color: inherit;
  }

  dialog[open] {
    display: flex;
  }

  dialog::backdrop {
    background: var(--dialog-backdrop);
    backdrop-filter: blur(4px);
  }
}

@utility card {
  @apply bg-void-blue/60 backdrop-blur-md border border-cyber-cyan/20 p-3 sm:p-4 shadow-glass hover:border-cyber-cyan/50 transition-all duration-300 relative mb-4 sm:mb-6;
  border-radius: 0.5rem; /* rounded-lg equivalent */
}

@utility card-header {
  @apply text-cyber-cyan font-gaming font-bold text-base sm:text-lg mb-2 sm:mb-3 uppercase tracking-wider;
}

@utility module-slot {
  @apply bg-void-deep/80 border-2 border-steel-dark p-2 text-sm hover:border-cyber-cyan/50 transition-all duration-300 cursor-pointer overflow-hidden;
  clip-path: polygon(
    0 0,
    calc(100% - 6px) 0,
    100% 6px,
    100% 100%,
    6px 100%,
    0 calc(100% - 6px)
  );
  /* Ensure minimum touch target size on mobile */
  min-height: 44px;

  &.filled {
    @apply border-cyber-cyan bg-cyber-cyan/10 shadow-neon;
  }

  &.ultimate {
    @apply border-amber-gold bg-amber-gold/10 shadow-gold-glow;
  }

  & img {
    @apply transition-transform duration-300;
  }

  &:hover img {
    @apply scale-110;
  }
}

@utility filled {
  &.module-slot {
    @apply border-cyber-cyan bg-cyber-cyan/10 shadow-neon;
  }
}

@utility ultimate {
  &.module-slot {
    @apply border-amber-gold bg-amber-gold/10 shadow-gold-glow;
  }
}

@utility btn-primary {
  @apply bg-cyber-cyan hover:bg-cyber-cyan-glow text-void-deep font-gaming font-bold py-2 px-4 sm:px-6 transition-all duration-300 shadow-neon hover:shadow-neon-strong uppercase tracking-wide text-sm;
  clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 0 100%);
  /* Ensure minimum touch target size on mobile */
  min-height: 44px;
}

@utility btn-secondary {
  @apply bg-void-blue/60 backdrop-blur-sm hover:bg-void-lighter/80 border border-cyber-cyan text-cyber-cyan font-gaming font-bold py-2 px-4 sm:px-6 transition-all duration-300 hover:shadow-neon uppercase tracking-wide text-sm;
  clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 0 100%);
  /* Ensure minimum touch target size on mobile */
  min-height: 44px;
}

@utility section-title {
  @apply text-lg sm:text-xl md:text-2xl font-gaming font-bold text-cyber-cyan mb-3 sm:mb-4 uppercase tracking-wider flex items-center gap-2;
  text-shadow: 0 0 15px var(--section-title-shadow);
}

@utility weapon-card {
  @apply bg-linear-to-br from-void-blue/70 to-void-deep/90 backdrop-blur-md border border-steel-dark/40 p-4 hover:border-cyber-cyan/50 hover:shadow-glass transition-all duration-300;
  clip-path: polygon(
    0 0,
    calc(100% - 10px) 0,
    100% 10px,
    100% 100%,
    10px 100%,
    0 calc(100% - 10px)
  );
}

@utility tab {
  @apply px-3 sm:px-4 py-2 border-b-2 border-transparent hover:border-cyber-cyan/50 transition-all cursor-pointer font-gaming uppercase text-xs sm:text-sm tracking-wide text-steel-grey;
  clip-path: polygon(
    8px 0,
    calc(100% - 8px) 0,
    100% 8px,
    100% 100%,
    0 100%,
    0 8px
  );
  /* Ensure minimum touch target size on mobile */
  min-height: 44px;

  &.active {
    @apply border-cyber-cyan bg-cyber-cyan/10 text-cyber-cyan shadow-neon;
  }
}

@utility active {
  &.tab {
    @apply border-cyber-cyan bg-cyber-cyan/10 text-cyber-cyan shadow-neon;
  }

  &.module-filter-btn,
  &.reactor-filter-btn,
  &.external-component-filter-btn {
    @apply border-cyber-cyan bg-cyber-cyan/20 text-cyber-cyan shadow-neon;
  }
}

@utility module-filter-btn {
  @apply px-3 sm:px-3 py-2 sm:py-1.5 text-xs sm:text-xs border border-steel-dark hover:border-cyber-cyan transition-all duration-200 cursor-pointer font-gaming uppercase tracking-wide bg-void-blue/40 backdrop-blur-sm;
  clip-path: polygon(
    0 0,
    calc(100% - 4px) 0,
    100% 4px,
    100% 100%,
    4px 100%,
    0 calc(100% - 4px)
  );
  min-height: 40px;

  &.active {
    @apply border-cyber-cyan bg-cyber-cyan/20 text-cyber-cyan shadow-neon;
  }
}

@utility reactor-filter-btn {
  @apply module-filter-btn;
}

@utility external-component-filter-btn {
  @apply module-filter-btn;
}

@utility arche-scroll-container {
  /* Arche Tuning Grid Styles */
  /* Arche Tuning Scroll Container */
  width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  /* Add some padding for mobile scroll */
  padding: 0;
  @media (max-width: 639px) {
    &::-webkit-scrollbar {
      height: 4px;
    }
    &::-webkit-scrollbar-track {
      background: var(--scrollbar-track);
      border-radius: 2px;
    }
    &::-webkit-scrollbar-thumb {
      background: var(--scrollbar-thumb);
      border-radius: 2px;
    }
    &::-webkit-scrollbar-thumb:hover {
      background: var(--scrollbar-thumb-hover);
    }
  }
}

@utility arche-grid {
  background-color: var(--arche-grid-bg);
  border: 1px solid var(--arche-grid-border);
  border-radius: 0.5rem;
  display: inline-flex;
  flex-direction: column;
  /* Remove width constraints to allow proper sizing */
  min-width: min-content;
  /* Padding inside the grid */
  padding: 8px;
  /* Center on larger screens */
  margin: 0 auto;

  @media (min-width: 640px) {
    padding: 12px;
  }

  @media (min-width: 768px) {
    padding: 16px;
  }
}

@utility arche-row {
  display: flex;
  gap: 1px;
  margin-bottom: 1px;
  flex-shrink: 0;

  @media (min-width: 640px) {
    gap: 2px;
    margin-bottom: 2px;
  }
}

@utility arche-node {
  border: 1px solid var(--arche-node-border);
  background: radial-gradient(
    circle at center,
    var(--arche-node-bg-center),
    var(--arche-node-bg-edge)
  );
  cursor: pointer;
  transition: all 0.2s;
  /* Responsive sizing: smaller on mobile, larger on desktop */
  width: 20px;
  height: 20px;
  border-radius: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: bold;
  position: relative;
  filter: var(--arche-node-dim);
  flex-shrink: 0;

  @media (min-width: 375px) {
    width: 22px;
    height: 22px;
  }

  @media (min-width: 475px) {
    width: 26px;
    height: 26px;
    font-size: 16px;
  }

  @media (min-width: 640px) {
    width: 32px;
    height: 32px;
    font-size: 18px;
  }

  @media (min-width: 768px) {
    width: 36px;
    height: 36px;
  }

  @media (min-width: 1024px) {
    width: 40px;
    height: 40px;
    font-size: 20px;
  }

  @media (min-width: 1280px) {
    width: 44px;
    height: 44px;
  }

  &:not(.invisible):not(.anchor):hover {
    border-color: var(--arche-node-hover-border);
    background-color: var(--arche-node-hover-bg);
    transform: scale(1.1);
  }

  &:not(.invisible):not(.anchor):active {
    border-color: var(--arche-node-hover-border);
    background-color: var(--arche-node-hover-bg);
    transform: scale(0.95);
  }

  &.selected {
    filter: brightness(1);
  }

  /* Tier-specific selection colors */
  &.selected.tier-normal {
    background-color: rgba(86, 184, 245, 0.6);
    border-color: #56b8f5;
    box-shadow:
      0 0 12px rgba(86, 184, 245, 0.8),
      inset 0 0 8px rgba(86, 184, 245, 0.4);
  }

  &.selected.tier-normal img {
    filter: brightness(1.3) drop-shadow(0 0 4px rgba(86, 184, 245, 0.6));
  }

  &.selected.tier-rare {
    background-color: rgba(211, 135, 244, 0.6);
    border-color: #d387f4;
    box-shadow:
      0 0 12px rgba(211, 135, 244, 0.8),
      inset 0 0 8px rgba(211, 135, 244, 0.4);
  }

  &.selected.tier-rare img {
    filter: brightness(1.3) drop-shadow(0 0 4px rgba(211, 135, 244, 0.6));
  }

  &.selected.tier-ultimate {
    background-color: rgba(248, 225, 121, 0.6);
    border-color: #f8e179;
    box-shadow:
      0 0 12px rgba(248, 225, 121, 0.8),
      inset 0 0 8px rgba(248, 225, 121, 0.4);
  }

  &.selected.tier-ultimate img {
    filter: brightness(1.3) drop-shadow(0 0 4px rgba(248, 225, 121, 0.6));
  }

  &.anchor {
    @apply cursor-default;
  }

  /* Tier-based border colors */
  &.tier-normal {
    border-color: #56b8f5;
  }

  &.tier-rare {
    border-color: #d387f4;
  }

  &.tier-ultimate {
    border-color: #f8e179;
  }

  &.invisible {
    @apply border-transparent bg-transparent cursor-default;
    pointer-events: none;
  }

  & .game-img {
    background-color: var(--arche-node-img-bg);
  }
}

@utility anchor {
  &.arche-node {
    @apply cursor-default;
  }
}

@utility invisible {
  &.arche-node {
    @apply border-transparent bg-transparent cursor-default;
    pointer-events: none;
  }
}

@utility arche-floating-tooltip {
  background-color: var(--arche-tooltip-bg);
  border: 1px solid var(--arche-tooltip-border);
  border-radius: 0.5rem;
  box-shadow: var(--arche-tooltip-shadow);
  position: fixed;
  z-index: 9999;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s ease-in-out;
  padding: 8px;
  min-width: 160px;
  max-width: 90vw;
  white-space: normal;

  @media (min-width: 640px) {
    padding: 12px;
    min-width: 200px;
    max-width: 300px;
  }

  &.visible {
    opacity: 1;
  }
}

@utility arche-tooltip {
  /* Show tooltip on hover for desktop */

  /* Show tooltip on active/tap for mobile */
  @apply text-xs sm:text-sm;

  /* Responsive tooltip images */
  & img {
    @apply w-6 h-6 sm:w-8 sm:h-8;
  }
}

@utility game-img {
  background-color: var(--game-img-bg);
  border-radius: 0.25rem;
}

@utility text-shadow {
  text-shadow: 0 0 10px var(--text-shadow-cyan);
}

@utility loading-image {
  /* Image loading states */
  &img {
    @apply opacity-50 animate-pulse;
    background: linear-gradient(
      90deg,
      var(--shimmer-base) 25%,
      var(--shimmer-highlight) 50%,
      var(--shimmer-base) 75%
    );
    background-size: 200% 100%;
    animation: loading 1.5s ease-in-out infinite;
  }
}

@utility loaded-image {
  &img {
    @apply opacity-100;
    animation: fadeIn 0.3s ease-in;
  }
}

@utility animate-slide-in {
  /* Toast animations */
  animation: slide-in 0.3s ease-out;
  transition:
    opacity 0.3s,
    transform 0.3s;
}

@layer base {
  body {
    @apply bg-void-deep text-steel-light font-body;
    position: relative;
  }

  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(
      circle at 50% 50%,
      var(--body-gradient-inner) 0%,
      var(--body-gradient-outer) 100%
    );
    pointer-events: none;
    z-index: -1;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-gaming uppercase tracking-wider;
  }
}

@layer utilities {
  @keyframes loading {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes slide-in {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
}
